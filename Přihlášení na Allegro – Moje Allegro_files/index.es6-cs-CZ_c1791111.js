var e,t,s,i,o,a={},n={};function h(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return a[e](s,s.exports,h),s.exports}h.m=a,h.d=(e,t)=>{for(var s in t)h.o(t,s)&&!h.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},h.f={},h.e=e=>Promise.all(Object.keys(h.f).reduce(((t,s)=>(h.f[s](e,t),t)),[])),h.u=e=>e+".es6-cs-CZ_"+h.h().slice(0,8)+".js",h.h=()=>"c1791111",h.o=(e,t)=>({}.hasOwnProperty.call(e,t)),e={},t="@allegro/opbox-modal:",h.l=(s,i,o,a)=>{if(e[s])e[s].push(i);else{var n,l;if(void 0!==o)for(var r=document.getElementsByTagName("script"),d=0;d<r.length;d++){var c=r[d];if(c.getAttribute("src")==s||c.getAttribute("data-webpack")==t+o){n=c;break}}n||(l=!0,(n=document.createElement("script")).type="module",n.charset="utf-8",n.timeout=120,h.nc&&n.setAttribute("nonce",h.nc),n.setAttribute("data-webpack",t+o),n.src=s,0!==n.src.indexOf(window.location.origin+"/")&&(n.crossOrigin="anonymous")),e[s]=[i];var w=(t,i)=>{n.onerror=n.onload=null,clearTimeout(u);var o=e[s];if(delete e[s],n.parentNode&&n.parentNode.removeChild(n),o&&o.forEach((e=>e(i))),t)return t(i)},u=setTimeout(w.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=w.bind(null,n.onerror),n.onload=w.bind(null,n.onload),l&&document.head.appendChild(n)}},h.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},h.p="https://assets.allegrostatic.com/sc-9182/",s=new Map,i=h.u,o=h.e,h.u=e=>{var t=s.get(e);return i(e)+(t?"?r"+t:"")},h.e=(e,t)=>(t||(t=0),(t?new Promise((s=>{navigator.onLine?setTimeout((()=>{s(o(e))}),300*t):window.addEventListener("online",(function t(){return window.removeEventListener("online",t),s(o(e))}))})):Promise.resolve(o(e))).catch((i=>{if(t>=5)throw i;return s.set(e,++t),h.e(e,t)})).finally((()=>{s.delete(e)}))),(()=>{var e={57:0};h.f.j=(t,s)=>{var i=h.o(e,t)?e[t]:void 0;if(0!==i)if(i)s.push(i[2]);else{var o=new Promise(((s,o)=>i=e[t]=[s,o]));s.push(i[2]=o);var a=h.p+h.u(t),n=Error();h.l(a,(s=>{if(h.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;n.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",n.name="ChunkLoadError",n.type=o,n.request=a,i[1](n)}}),"chunk-"+t,t)}};var t=(t,s)=>{var i,o,[a,n,l]=s,r=0;if(a.some((t=>0!==e[t]))){for(i in n)h.o(n,i)&&(h.m[i]=n[i]);l&&l(h)}for(t&&t(s);r<a.length;r++)o=a[r],h.o(e,o)&&e[o]&&e[o][0](),e[o]=0},s=self.webpackJsonp_e59d2=self.webpackJsonp_e59d2||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();const l="mpof_5r",r="mpof_ki",d="meqh_en",c={closeOnEsc:!0,closeOnOverlay:!0},w=()=>{};window.opbox.component.register([{prototypeName:"allegro.modal",clientImplementationVersion:"f82"},{prototypeName:"allegro.modal.withDelay",clientImplementationVersion:"f82"}],class{constructor({baseNode:e,props:t,targetWindow:s=window,services:i}){this.showModalByAPI=(e=w)=>{this.visible||(this.onDismiss=e,this.showModal(),this.window.opbox.analytics.sendBoxInteractionEvent({contextNode:this.modalNode,label:"modalAPI",value:"open"}))},this.hideModalByAPI=()=>{this.visible&&(this.delegateHideModal(),this.window.opbox.analytics.sendBoxInteractionEvent({contextNode:this.modalNode,label:"modalAPI",value:"close"}))},this.handleHashChange=()=>{if(this.visible&&this.shouldHandleHash()&&!this.doesHashMatch(this.triggerHash))return this.hideModal(),void this.handleHashChangeAnalytics(this.actionTypeValue.close);!this.visible&&this.shouldHandleHash()&&this.doesHashMatch(this.triggerHash)&&(this.showModal(),this.handleHashChangeAnalytics(this.actionTypeValue.open))},this.onKeyDown=e=>{27===e.keyCode&&this.visible&&this.config.closeOnEsc&&(e.preventDefault(),this.window.opbox.analytics.sendBoxInteractionEvent({contextNode:this.baseNode,label:"modalClose_escKey"}),this.delegateHideModal())},this.delegateHideModal=()=>{this.shouldHandleHash()&&this.doesHashMatch(this.triggerHash)?this.simulateModalAsPage?this.pushBrowserHistory():this.replaceBrowserHistory():this.hideModal()},this.handleMouseDown=e=>{this.currentTargetNode=e.target},this.handleMouseUp=e=>{this.currentTargetNode!==e.target&&(this.currentTargetNode=null)},this.toggleVisibility=e=>{var t;if(""===e.pointerType)return;const s=null==(t=this.contentNode)?void 0:t.contains(e.target),i=!this.window.document.contains(e.target);if(!s&&!i){if(e.stopPropagation(),e.preventDefault(),!this.config.closeOnOverlay)return;this.window.opbox.analytics.sendBoxInteractionEvent({contextNode:this.modalNode,label:"modalClose_overlay"});const t=null!==this.currentTargetNode;this.currentTargetNode=null,this.visible&&t?this.delegateHideModal():this.visible||this.showModal()}},this.toggleVisibilityOnKeyDown=e=>{var t;const s=null==(t=e.key)?void 0:t.toLowerCase();" "!==s&&"enter"!==s||(this.handleMouseDown(e),this.toggleVisibility(e))},this.setConfig=({closeOnEsc:e=c.closeOnEsc,closeOnOverlay:t=c.closeOnOverlay}=Object.assign({},c))=>{this.config=Object.assign(Object.assign({},this.config),{},{closeOnEsc:e,closeOnOverlay:t})},this.window=s,this.bodyNode=this.window.document.body,this.onDismiss=w,this.baseNode=e,this.modalTriggers=this.baseNode.querySelectorAll('[data-role="modal-trigger"]'),this.modalNode=this.baseNode.querySelector('[data-role="modal"]'),this.contentNode=this.baseNode.querySelector('[data-role="modal-content-container"]'),this.scrollContainer=this.baseNode.querySelector('[data-role="modal-body"]'),this.currentTargetNode=null,this.simulateModalAsPage=t.simulateModalAsPage,this.showOnlyOnceADay=t.showOnlyOnceADay,this.boxName=t.boxName,this.hashMatchStrategy=t.hashMatchStrategy,this.triggerHash=t.triggerLinkUrl,this.showInitially=t.showInitially,this.visibilityPreference=t.visibilityPreference,this.showDelay=t.showDelay,this.visible=!1,this.services=i,this.actionTypeValue={open:"open",close:"close"},this.visibilityClassNameList=t.disableAnimation?[r]:[r,"_72c72_6e-gY"],this.isModalInitiallyOpenWithHash=!1,this.config=Object.assign({},c)}getLocationHash(){return this.window.location.hash}getPreviousHash(){const{state:e}=this.window.history;return e instanceof Object&&e.previousHash||""}shouldHandleHash(){return"none"!==this.hashMatchStrategy}doesHashMatch(e){return"startsWith"===this.hashMatchStrategy?this.getLocationHash().startsWith(e):this.getLocationHash()===e}reportVisibility(){if(this.visibilityPreference){const{key:e,value:t}=this.visibilityPreference;this.window.opbox.preferences.set(e,t)}}async showModal(){this.visible=!0,this.modalNode.classList.remove(l),this.modalNode.classList.add(...this.visibilityClassNameList),this.bodyNode.classList.add(d),this.window.opbox.boxViewsMarker.recursivelyMarkBoxAsVisible(this.contentNode),this.reportVisibility(),this.window.addEventListener("mousedown",this.handleMouseDown),this.window.addEventListener("mouseup",this.handleMouseUp);const e=await h.e(78).then(h.bind(h,1));this.focusTrap=e.createFocusTrap(this.modalNode,{allowOutsideClick:!0,fallbackFocus:()=>this.window.document.activeElement}),this.visible&&this.focusTrap.activate()}hideModal(){var e;this.visible=!1,this.isModalInitiallyOpenWithHash=!1,this.modalNode.classList.add(l),this.modalNode.classList.remove(...this.visibilityClassNameList),this.bodyNode.classList.remove(d),this.onDismiss(),this.onDismiss=w,this.config=Object.assign({},c),this.window.opbox.boxViewsMarker.recursivelyMarkBoxAsHidden(this.contentNode),this.services.get("opbox-modal-service").then((e=>e.broadcastDismiss(this.boxName))),this.window.removeEventListener("mousedown",this.handleMouseDown),this.window.removeEventListener("mouseup",this.handleMouseUp),null==(e=this.focusTrap)||e.deactivate()}handleHashChangeAnalytics(e){this.window.opbox.analytics.sendBoxInteractionEvent({contextNode:this.modalNode,label:e===this.actionTypeValue.open?"modalOpen":"modalClose",value:"hashChange"})}dispatchHashChangeEvent(){if(this.window.HashChangeEvent)return void this.window.dispatchEvent(new this.window.HashChangeEvent("hashchange"));const e=this.window.document.createEvent("Event");e.initEvent("hashchange",!0,!0),this.window.dispatchEvent(e)}replaceBrowserHistory(){const{pathname:e,search:t}=this.window.location;this.window.history.replaceState(null,this.window.document.title,`${e}${t}`),this.isModalInitiallyOpenWithHash||this.window.history.back(),this.dispatchHashChangeEvent()}pushBrowserHistory(){const{pathname:e,search:t,hash:s}=this.window.location;this.window.history.pushState({previousHash:s},this.window.document.title,`${e}${t}${this.getPreviousHash()}`),this.dispatchHashChangeEvent()}attachListeners(){this.modalTriggers.forEach((e=>{e.addEventListener("click",this.toggleVisibility),e.addEventListener("keydown",this.toggleVisibilityOnKeyDown)})),this.window.addEventListener("keydown",this.onKeyDown),this.window.addEventListener("hashchange",this.handleHashChange)}setLastSeenDate(e){this.window.localStorage.setItem(this.boxName,e)}getLastSeenDate(){return this.window.localStorage.getItem(this.boxName)}showModalInitially(){if(this.shouldHandleHash()&&this.doesHashMatch(this.triggerHash)||this.showInitially){if(this.showOnlyOnceADay){const e=(()=>{const e=new Date;return`${e.getDate()}${e.getMonth()}${e.getYear()}`})();if(this.getLastSeenDate()===e)return;this.setLastSeenDate(e)}if(this.showDelay){const e=1e3*this.showDelay;return void setTimeout((()=>{this.displayModal()}),e)}this.displayModal()}}displayModal(){this.showModal(),this.isModalInitiallyOpenWithHash=!0}onMount(){this.attachListeners(),this.services.get("opbox-modal-service").then((e=>e.register({boxName:this.boxName,showModal:this.showModalByAPI,hideModal:this.hideModalByAPI,setConfig:this.setConfig}))),this.showModalInitially()}onUnmount(){this.modalTriggers.forEach((e=>{e.removeEventListener("click",this.toggleVisibility)})),this.window.removeEventListener("keydown",this.onKeyDown),this.window.removeEventListener("hashchange",this.handleHashChange)}});
//# sourceMappingURL=index.es6-cs-CZ_c1791111.js.map