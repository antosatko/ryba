/*! For license information please see index_2f0a8284.js.LICENSE.txt */
!function(){"use strict";var e={};function r(e,r,t,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,o)}function t(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function u(e){r(a,o,i,u,c,"next",e)}function c(e){r(a,o,i,u,c,"throw",e)}u(void 0)}))}}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e){var r=function(e,r){if("object"!==o(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return e+""}(e);return"symbol"===o(r)?r:r+""}function a(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function u(e,r,t){return r&&a(e.prototype,r),t&&a(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var c="offers",s="queries",f="products",l="watchedQuery",p="watchedOffers",d="watchedProductQuery",v=function(e){return e.FAVORITE_OFFER="favoriteOfferId",e.FAVORITE_QUERY="favoriteQueryId",e.FAVORITE_PRODUCT="favoriteProductId",e.WATCHED_QUERY="watchedQuery",e.WATCHED_PRODUCT_QUERY="watchedProductQuery",e}({}),h=function(e){return e.ADD="favoriteAdd",e.REMOVE="favoriteRemove",e}({});function y(e,r,t){return(r=i(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var b=function(e){var r,t=Error(e);throw null==(r=window.opbox)||r.reportError(t),t},m="logowanie",w="prihlaseni",g="prihlasenie",O=y(y(y(y(y(y(y({},"allegro-pl",m),"allegro-business-pl",m),"allegro-cz",w),"allegro-business-cz",w),"allegro-sk",g),"allegro-business-sk",g),"allegro-hu","bejelentkezes"),j=function(e){var r=O[e];r||b("Unsupported marketplace: ".concat(e));var t,n=window.location,o=n.pathname,i=n.search;window.location.assign("/".concat(r,"?origin_url=").concat((t=o+i,window.encodeURIComponent(t))))},I="application/vnd.allegro.public.v1+json",k="application/vnd.allegro.public.v2+json",P={withCredentials:!0},T=function(e){return Object.assign(Object.assign({},P),{},{headers:{Accept:e,"Content-Type":e}})},E=function(e,r,t){return window.opbox.edge.post(e,r,T(t))},F=function(e,r){return window.opbox.edge.delete(e,T(r))};function R(){var e,r,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function i(t,n,o,i){var c=n&&n.prototype instanceof u?n:u,s=Object.create(c.prototype);return S(s,"_invoke",function(t,n,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,t){return i=r,u=0,c=e,p.n=t,a}};function d(t,n){for(u=t,c=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,i=f[r],d=p.p,v=i[2];t>3?(o=v===n)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=t<2&&d<i[1])?(u=0,p.v=n,p.n=i[1]):d<v&&(o=t<3||i[0]>n||n>v)&&(i[4]=t,i[5]=n,p.n=v,u=0))}if(o||t>1)return a;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),u=f,c=v;(r=u<2?e:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),r=i[o]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,u<2&&(u=0)}else 1===u&&(r=i.return)&&r.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((r=(l=p.n<0)?c:t.call(n,p))!==a)break}catch(r){i=e,u=1,c=r}finally{s=1}}return{value:r,done:l}}}(t,o,i),!0),s}var a={};function u(){}function c(){}function s(){}r=Object.getPrototypeOf;var f=[][n]?r(r([][n]())):(S(r={},n,(function(){return this})),r),l=s.prototype=u.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,S(e,o,"GeneratorFunction")),e.prototype=Object.create(l),e}return c.prototype=s,S(l,"constructor",s),S(s,"constructor",c),c.displayName="GeneratorFunction",S(s,o,"GeneratorFunction"),S(l),S(l,o,"Generator"),S(l,n,(function(){return this})),S(l,"toString",(function(){return"[object Generator]"})),(R=function(){return{w:i,m:p}})()}function S(e,r,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}S=function(e,r,t,n){function i(r,t){S(e,r,(function(e){return this._invoke(r,t,e)}))}r?o?o(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(i("next",0),i("throw",1),i("return",2))},S(e,r,t,n)}var _=function(){var e=t(R().m((function e(r){var t,n;return R().w((function(e){for(;;)switch(e.n){case 0:return t=r.offerId,e.n=1,o="/watched/offers/".concat(t),i=k,window.opbox.edge.put(o,void 0,T(i));case 1:return n=e.v,e.a(2,Object.assign(Object.assign({},n),{},{data:{id:t}}))}var o,i}),e)})));return function(r){return e.apply(this,arguments)}}(),A=function(e){var r=e.queryId;return F("/web-edge/watched-product-queries/".concat(r),I)},G=function(e){var r=e.productId,t=e.params;return E("/web-edge/is-watched-product-query",Object.assign({productId:r},t),I)},q="OFFER",C="QUERY",Q="PRODUCT";function U(){var e,r,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function i(t,n,o,i){var c=n&&n.prototype instanceof u?n:u,s=Object.create(c.prototype);return x(s,"_invoke",function(t,n,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,t){return i=r,u=0,c=e,p.n=t,a}};function d(t,n){for(u=t,c=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,i=f[r],d=p.p,v=i[2];t>3?(o=v===n)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=t<2&&d<i[1])?(u=0,p.v=n,p.n=i[1]):d<v&&(o=t<3||i[0]>n||n>v)&&(i[4]=t,i[5]=n,p.n=v,u=0))}if(o||t>1)return a;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),u=f,c=v;(r=u<2?e:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),r=i[o]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,u<2&&(u=0)}else 1===u&&(r=i.return)&&r.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((r=(l=p.n<0)?c:t.call(n,p))!==a)break}catch(r){i=e,u=1,c=r}finally{s=1}}return{value:r,done:l}}}(t,o,i),!0),s}var a={};function u(){}function c(){}function s(){}r=Object.getPrototypeOf;var f=[][n]?r(r([][n]())):(x(r={},n,(function(){return this})),r),l=s.prototype=u.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,x(e,o,"GeneratorFunction")),e.prototype=Object.create(l),e}return c.prototype=s,x(l,"constructor",s),x(s,"constructor",c),c.displayName="GeneratorFunction",x(s,o,"GeneratorFunction"),x(l),x(l,o,"Generator"),x(l,n,(function(){return this})),x(l,"toString",(function(){return"[object Generator]"})),(U=function(){return{w:i,m:p}})()}function x(e,r,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}x=function(e,r,t,n){function i(r,t){x(e,r,(function(e){return this._invoke(r,t,e)}))}r?o?o(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(i("next",0),i("throw",1),i("return",2))},x(e,r,t,n)}var D=function(){return u((function e(r,t){n(this,e),this.favoriteType=void 0,this.payload=void 0,this.recordId=void 0,this.favoriteType=function(e){return y(y(y(y(y(y({},c,q),p,q),s,C),l,C),f,Q),d,Q)[e]}(r),"string"==typeof t?this.recordId=t:this.payload=t}),[{key:"add",value:(v=t(U().m((function e(){var r;return U().w((function(e){for(;;)switch(e.n){case 0:if(this.payload){e.n=1;break}return e.a(2,b("Add failure - recordData is missing"));case 1:r=this.favoriteType,e.n=r===C?2:r===q?3:r===Q?4:5;break;case 2:return e.a(2,this.addQuery());case 3:return e.a(2,this.addOffer());case 4:return e.a(2,this.addProduct());case 5:return e.a(2,b("Add failure - unsupported type: ".concat(this.favoriteType)));case 6:return e.a(2)}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"remove",value:(a=t(U().m((function e(){var r;return U().w((function(e){for(;;)switch(e.n){case 0:if(this.recordId){e.n=1;break}return e.a(2,b("Remove failure - id is missing"));case 1:r=this.favoriteType,e.n=r===C?2:r===q?3:r===Q?4:5;break;case 2:return e.a(2,(n={queryId:this.recordId},F("/web-edge/watched-queries/".concat(n.queryId),I)));case 3:return e.a(2,(t={offerId:this.recordId},F("/watched/offers/".concat(t.offerId),k)));case 4:return e.a(2,A({queryId:this.recordId}));case 5:return e.a(2,b("Remove failure - unsupported type: ".concat(this.favoriteType)));case 6:return e.a(2)}var t,n}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"checkup",value:(i=t(U().m((function e(){var r;return U().w((function(e){for(;;)switch(e.n){case 0:if(this.payload){e.n=1;break}return e.a(2,Promise.reject());case 1:r=this.favoriteType,e.n=r===C?2:r===Q?3:4;break;case 2:return e.a(2,(t={queryUrl:this.payload.value},E("/web-edge/is-watched-query",{url:t.queryUrl},I)));case 3:return e.a(2,G({productId:this.payload.value,params:this.payload.params}));case 4:return e.a(2,b("Checkup failure - unsupported type: ".concat(this.favoriteType)));case 5:return e.a(2)}var t}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"addQuery",value:(o=t(U().m((function e(){var r;return U().w((function(e){for(;;)switch(e.n){case 0:if(null!=(r=this.payload)&&r.value){e.n=1;break}return e.a(2,b("Add failure - url is missing"));case 1:return e.a(2,(t={queryUrl:this.payload.value},E("/web-edge/watched-queries/",{url:t.queryUrl},I)))}var t}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"addOffer",value:(r=t(U().m((function e(){var r;return U().w((function(e){for(;;)switch(e.n){case 0:if(null!=(r=this.payload)&&r.value){e.n=1;break}return e.a(2,b("Add failure - itemId is missing"));case 1:return e.a(2,_({offerId:this.payload.value}))}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"addProduct",value:(e=t(U().m((function e(){var r;return U().w((function(e){for(;;)switch(e.n){case 0:if(null!=(r=this.payload)&&r.value){e.n=1;break}return e.a(2,b("Add failure - productId is missing"));case 1:return e.a(2,(t={productId:this.payload.value,params:this.payload.params},E("/web-edge/watched-product-queries",Object.assign({productId:t.productId},t.params),I)))}var t}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,r,o,i,a,v}(),L=y(y(y({},c,v.FAVORITE_OFFER),s,v.FAVORITE_QUERY),f,v.FAVORITE_PRODUCT),V=function(e,r){try{return window.localStorage.setItem(L[e],JSON.stringify(r)),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}},M=function(e){var r=JSON.parse(window.localStorage.getItem(L[e])||"{}");return Promise.resolve(r)},N=function(e){return window.localStorage.removeItem(L[e]),Promise.resolve(!0)};function z(){var e,r,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function i(t,n,o,i){var c=n&&n.prototype instanceof u?n:u,s=Object.create(c.prototype);return W(s,"_invoke",function(t,n,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,t){return i=r,u=0,c=e,p.n=t,a}};function d(t,n){for(u=t,c=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,i=f[r],d=p.p,v=i[2];t>3?(o=v===n)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=t<2&&d<i[1])?(u=0,p.v=n,p.n=i[1]):d<v&&(o=t<3||i[0]>n||n>v)&&(i[4]=t,i[5]=n,p.n=v,u=0))}if(o||t>1)return a;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),u=f,c=v;(r=u<2?e:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),r=i[o]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,u<2&&(u=0)}else 1===u&&(r=i.return)&&r.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((r=(l=p.n<0)?c:t.call(n,p))!==a)break}catch(r){i=e,u=1,c=r}finally{s=1}}return{value:r,done:l}}}(t,o,i),!0),s}var a={};function u(){}function c(){}function s(){}r=Object.getPrototypeOf;var f=[][n]?r(r([][n]())):(W(r={},n,(function(){return this})),r),l=s.prototype=u.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,W(e,o,"GeneratorFunction")),e.prototype=Object.create(l),e}return c.prototype=s,W(l,"constructor",s),W(s,"constructor",c),c.displayName="GeneratorFunction",W(s,o,"GeneratorFunction"),W(l),W(l,o,"Generator"),W(l,n,(function(){return this})),W(l,"toString",(function(){return"[object Generator]"})),(z=function(){return{w:i,m:p}})()}function W(e,r,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}W=function(e,r,t,n){function i(r,t){W(e,r,(function(e){return this._invoke(r,t,e)}))}r?o?o(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(i("next",0),i("throw",1),i("return",2))},W(e,r,t,n)}var Y=function(){return u((function e(r){var o=this,i=r.props;n(this,e),this.props=void 0,this.listeners=new Set,this.loginRedirectReady=void 0,this.onFavoriteStatusChange=function(e){var r="function"==typeof e;return r&&o.listeners.add(e),function(){r&&o.listeners.delete(e)}},this.init=t(z().m((function e(){var r;return z().w((function(e){for(;;)if(0===e.n)return r=[c,f,s],e.a(2,o.handleReLogin(r))}),e)}))),this.handleReLogin=function(){var e=t(z().m((function e(r){var t,n,i,a,u,c,s,f,l=arguments;return z().w((function(e){for(;;)switch(e.p=e.n){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:[],i=r[t=l.length>1&&void 0!==l[1]?l[1]:0]){e.n=1;break}return e.a(2,n);case 1:if(e.p=1,o.props.userLoggedIn){e.n=3;break}return e.n=2,N(i);case 2:e.n=9;break;case 3:return e.n=4,M(i);case 4:if(a=e.v,u=a.itemId,c=a.action,s=a.params,f=void 0===s?{}:s,null==u){e.n=9;break}if(c!==h.ADD){e.n=6;break}return e.n=5,o.addFavorite(i,u,f);case 5:e.n=7;break;case 6:if(c!==h.REMOVE){e.n=7;break}return e.n=7,o.removeFavorite(i,u);case 7:return e.n=8,N(i);case 8:n.push({mode:i,itemId:u,options:f,isFavorite:!0});case 9:e.n=11;break;case 10:e.p=10,e.v;case 11:return e.a(2,o.handleReLogin(r,t+1,n))}}),e,null,[[1,10]])})));return function(r){return e.apply(this,arguments)}}(),this.addFavorite=function(){var e=t(z().m((function e(r,t){var n,i,a=arguments;return z().w((function(e){for(;;)if(0===e.n)return i=new D(r,{value:t,params:n=a.length>2&&void 0!==a[2]?a[2]:{}}),e.a(2,o.props.userLoggedIn?i.add().then((function(e){return o.notifyStatusListeners({mode:r,itemId:t,options:n,isFavorite:!0}),e})).catch((function(e){return Promise.reject(e)})):V(r,{itemId:t,action:h.ADD,params:n}).then((function(){j(o.props.marketplaceId)})))}),e)})));return function(r,t){return e.apply(this,arguments)}}(),this.removeFavorite=function(e,r){var t=new D(e,r);return o.props.userLoggedIn?t.remove().then((function(t){return o.notifyStatusListeners({mode:e,itemId:r,isFavorite:!1}),t})).catch((function(t){return 401===t.status?V(e,{itemId:r,action:h.REMOVE}).then((function(){return j(o.props.marketplaceId)})):Promise.reject(t)})):Promise.reject()},this.checkupFavorite=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.props.userLoggedIn?new D(e,{value:r,params:t}).checkup():Promise.reject()},this.getPublicApi=function(){return{mode:{Offers:c,Queries:s,Products:f,WatchedQuery:l,WatchedOffers:p,WatchedProductQuery:d},addFavorite:o.addFavorite,removeFavorite:o.removeFavorite,checkupFavorite:o.checkupFavorite,onFavoriteStatusChange:o.onFavoriteStatusChange,loginRedirectReady:o.loginRedirectReady}},this.props=i,this.loginRedirectReady=new Promise((function(e){o.init().then((function(r){r.length>0&&e(r)}))}))}),[{key:"notifyStatusListeners",value:function(e){this.listeners.forEach((function(r){r(e)}))}}])}(),J=function(e){try{return JSON.parse(window.document.querySelector('script[data-serialize-plugin-name="favorites"][data-civ="04a"]').textContent)}catch(e){return window.opbox.reportError(Error('Missing serialized props of plugin "favorites", with civ "04a"')),{}}}();J&&window.opbox.plugin.register({name:"favorites"},new Y({props:J}).getPublicApi());var H=window;for(var B in e)H[B]=e[B];e.__esModule&&Object.defineProperty(H,"__esModule",{value:!0})}();
//# sourceMappingURL=index_2f0a8284.js.map